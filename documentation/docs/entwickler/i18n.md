# Mehrsprachigkeit (i18n) - Dokumentation

## √úbersicht

PetBuddy unterst√ºtzt jetzt Mehrsprachigkeit mit Deutsch und Englisch. Das System basiert auf einem zentralen Translator-Modul mit JSON-√úbersetzungsdateien.

## Struktur

```
i18n/
‚îú‚îÄ‚îÄ __init__.py          # Modul-Einstiegspunkt
‚îú‚îÄ‚îÄ translator.py        # √úbersetzungs-Engine
‚îú‚îÄ‚îÄ de.json             # Deutsche √úbersetzungen
‚îî‚îÄ‚îÄ en.json             # Englische √úbersetzungen
```

## Verwendung

### 1. Translator importieren

```python
from i18n import get_translator

# Translator-Instanz holen
t = get_translator()
```

### 2. Texte √ºbersetzen

```python
# Einfache √úbersetzung
text = t.t("auth.login")  # "Anmelden" (de) oder "Login" (en)

# Mit Platzhaltern
text = t.t("auth.password_min_length", min_length=8)
# "Passwort muss mindestens 8 Zeichen haben"
```

### 3. Sprache wechseln

```python
# Programmtisch
t.set_language("en")

# √úber UI (ThemeManager)
theme_manager.create_language_selector()
```

## √úbersetzungsschl√ºssel

Die √úbersetzungen sind hierarchisch organisiert:

- `app.*` - App-Titel und globale Texte
- `common.*` - Allgemeine Buttons und Aktionen
- `navigation.*` - Navigation (Start, Melden, Profil)
- `auth.*` - Login/Registrierung
- `discover.*` - Startseite mit Meldungen
- `post_form.*` - Meldungsformular
- `profile.*` - Profil-Bereich
- `dialogs.*` - Dialoge
- `status.*`, `species.*`, `sex.*`, `colors.*` - Stammdaten
- `errors.*` - Fehlermeldungen

## Neue √úbersetzungen hinzuf√ºgen

1. **In de.json und en.json**:
```json
{
  "mein_bereich": {
    "mein_text": "Deutscher Text"
  }
}
```

2. **Im Code verwenden**:
```python
t.t("mein_bereich.mein_text")
```

## Integration in Views

### Beispiel: Button lokalisieren

**Vorher:**
```python
ft.ElevatedButton("Speichern", on_click=save)
```

**Nachher:**
```python
from i18n import get_translator

t = get_translator()
ft.ElevatedButton(t.t("common.save"), on_click=save)
```

### Beispiel: Formularfeld

```python
t = get_translator()
ft.TextField(
    label=t.t("auth.email"),
    hint_text="mail@example.com"
)
```

## ThemeManager-Integration

Der `ThemeManager` bietet einen Sprach-Dropdown:

```python
# In app.py
language_selector = theme_manager.create_language_selector()

# Callback registrieren
theme_manager.on_language_change = self._reload_ui
```

## Persistierung

Die Sprachauswahl wird automatisch im `client_storage` gespeichert und beim n√§chsten Start wiederhergestellt.

## Verf√ºgbare Sprachen

- üá©üá™ Deutsch (`de`)
- üá¨üáß English (`en`)

## Weitere Sprachen hinzuf√ºgen

1. Neue JSON-Datei erstellen (z.B. `fr.json`)
2. Alle Schl√ºssel aus `de.json` kopieren und √ºbersetzen
3. In `translator.py` die Sprache registrieren:

```python
def get_available_languages(self) -> Dict[str, str]:
    return {
        "de": "Deutsch",
        "en": "English",
        "fr": "Fran√ßais"  # Neu
    }
```

4. Lade-Logik erweitern:

```python
for lang in ["de", "en", "fr"]:  # Neu: "fr"
    lang_file = i18n_dir / f"{lang}.json"
    # ...
```

## Best Practices

1. **Konsistente Schl√ºssel**: Verwende sprechende, hierarchische Schl√ºssel
2. **Platzhalter**: Nutze `{variable}` f√ºr dynamische Werte
3. **Kurze Keys**: `auth.login` statt `authentication.login_button_text`
4. **Kontext**: Gruppiere zusammengeh√∂rige Texte
5. **Fallback**: Fehlende √úbersetzungen zeigen den Key an

## Testen

```bash
python -c "from i18n import get_translator; t = get_translator(); \
           print(t.t('auth.login')); \
           t.set_language('en'); \
           print(t.t('auth.login'))"
```

Ausgabe:
```
Anmelden
Login
```
